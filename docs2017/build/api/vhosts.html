<html lang="en">
<head>
  <title>IBM&reg; Cloudant&reg; NoSQL DB for Bluemix&reg;</title>
  <meta charset="utf-8"></meta>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
  <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
</head>

<body>
  <h1 id="virtual-hosts">Virtual hosts</h1>
  <p class="shortdesc">Virtual hosts (vhosts) are a way to make Cloudant serve data from a different domain than the one normally associated with your Cloudant account.</p>
  <p>You can create as many vhosts as needed and point them to any endpoint in your Cloudant account. Vhosts are often used to point to a <code>_rewrite</code> endpoint of a design document in order to use Cloudant as a web server. You need to have the admin
    role in order to use any of the vhost endpoints.</p>
  <h2 id="listing-virtual-hosts">Listing virtual hosts</h2>
  <p>To list all virtual hosts in your account, send a <code>GET</code> request to <code>/_api/v2/user/virtual_hosts</code>.</p>
  <p>The JSON response details all of the virtual hosts, and any virtual path associated with each host.</p>
  <p><em>Example request to list all vhosts, using HTTP:</em></p>
  <pre class="codeblock"><code class="lang-http hljs"><span class="hljs-keyword">GET</span> <span class="hljs-string">/_api/v2/user/virtual_hosts</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: $ACCOUNT.cloudant.com
</code></pre>
  <p><em>Example request to list all vhosts, using the command line:</em></p>
  <pre class="codeblock"><code class="lang-sh hljs">curl <span class="hljs-string">"https://<span class="hljs-variable">$ACCOUNT</span>.cloudant.com/_api/v2/user/virtual_hosts"</span>
</code></pre>
  <p><em>Example response, list all vhosts:</em></p>
  <pre class="codeblock"><code class="lang-json hljs">{
    <span class="hljs-attr">"virtual_hosts"</span>: [
        [
            <span class="hljs-string">"system1.business.org"</span>, 
            <span class="hljs-string">""</span>
        ], 
        [
            <span class="hljs-string">"system2.business.org"</span>, 
            <span class="hljs-string">"/specificpath"</span>
        ]
    ]
}
</code></pre>
  <h2 id="creating-a-virtual-host">Creating a virtual host</h2>
  <p>To create a virtual host, send a <code>POST</code> request to the <code>/_api/v2/user/virtual_hosts</code> endpoint, with a description of the vhost as a JSON object within the request body. The JSON document contains these fields:</p>
  <table>
    <thead>
      <tr>
        <th>Field</th>
        <th>Purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>host</code></td>
        <td>The domain name you want to use for the vhost.</td>
      </tr>
      <tr>
        <td><code>path</code></td>
        <td>An (optional) endpoint in your Cloudant account the vhost should point to.</td>
      </tr>
    </tbody>
  </table>
  <p><em>Example request for creating a vhost, using HTTP:</em></p>
  <pre class="codeblock"><code class="lang-http hljs"><span class="hljs-keyword">POST</span> <span class="hljs-string">/_api/v2/user/virtual_hosts</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: $ACCOUNT.cloudant.com
<span class="hljs-attribute">Content-Type</span>: application/json
</code></pre>
  <p><em>Example request for creating a vhost, using the command line:</em></p>
  <pre class="codeblock"><code class="lang-sh hljs">curl <span class="hljs-string">"https://<span class="hljs-variable">$ACCOUNT</span>.cloudant.com/_api/v2/user/virtual_hosts"</span> -X POST <span class="hljs-_">-d</span> <span class="hljs-string">'@vhost.json'</span> -H <span class="hljs-string">'Content-Type: application/json'</span>
</code></pre>
  <p><em>Example JSON describing the required vhost:</em></p>
  <pre class="codeblock"><code class="lang-json hljs">{
    <span class="hljs-attr">"host"</span>: <span class="hljs-string">"www.example.com"</span>,
    <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/_api/v2/user/virtual_hosts"</span>
}
</code></pre>
  <p><em>Example response to request for a vhost:</em></p>
  <pre class="codeblock"><code class="lang-json hljs">{
  <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
  <h2 id="deleting-a-virtual-host">Deleting a virtual host</h2>
  <p>To delete a vhost, send a <code>DELETE</code> request to <code>/_api/v2/user/virtual_hosts</code>.</p>
  <p>Specify the host to delete within the request body, as shown in the following example.</p>
  <p><em>Example request for deleting a vhost, using HTTP:</em></p>
  <pre class="codeblock"><code class="lang-http hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-string">/_api/v2/user/virtual_hosts</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: $ACCOUNT.cloudant.com
<span class="hljs-attribute">Content-Type</span>: application/json
</code></pre>
  <p><em>Example request for deleting a vhost, using the command line:</em></p>
  <pre class="codeblock"><code class="lang-sh hljs">curl <span class="hljs-string">"https://account.cloudant.com/_api/v2/user/virtual_hosts"</span> -X DELETE <span class="hljs-_">-d</span> <span class="hljs-string">'@vhost.json'</span> -H <span class="hljs-string">'Content-Type: application/json'</span>
</code></pre>
  <p><em>Example JSON describing the vhost to delete:</em></p>
  <pre class="codeblock"><code class="lang-json hljs">{
  <span class="hljs-attr">"host"</span>: <span class="hljs-string">"www.example.com"</span>
}
</code></pre>
  <p><em>Example response to vhost delete request:</em></p>
  <pre class="codeblock"><code class="lang-json hljs">{
  <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
  <footer>
    <div>
      <p>Copyright &copy; 2015, 2017. All Rights Reserved.</p>
    </div>
  </footer>
</body>
</html>